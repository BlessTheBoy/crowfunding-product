"use strict";var openMenuBtn=document.getElementById("burger"),closeMenuBtn=document.getElementById("closeMenu"),menuControls=document.getElementById("menuControls"),nav=document.getElementById("nav");function openMenu(){nav.classList.add("open"),menuControls.classList.add("open")}function closeMenu(){nav.classList.remove("open"),menuControls.classList.remove("open")}console.log("script loaded"),openMenuBtn.addEventListener("click",openMenu),closeMenuBtn.addEventListener("click",closeMenu);var bookmarkBtn=document.getElementById("bookmarkBtn");bookmarkBtn.addEventListener("click",addBookmark);var bookmarked=!1;function addBookmark(){bookmarked||(console.log("adding bookmark"),bookmarkBtn.lastElementChild.innerText="Bookmarked",bookmarkBtn.classList.add("bookmarked"),bookmarked=!0)}var popupModal=document.querySelector(".popup-modal"),successModal=document.querySelector(".success-modal"),modalTriggers=document.querySelectorAll(".popup-trigger"),modalCloseTrigger=document.querySelector(".popup-modal__close"),successModalCloseTrigger=document.querySelector(".success-modal__close"),bodyBlackout=document.querySelector(".body-blackout"),cardWrap=document.querySelectorAll(".cardWrap"),radios=document.querySelectorAll("input[type='radio']"),forms=document.querySelectorAll(".productForm form"),inputs=document.querySelectorAll(".productForm form input[type='text']"),donations=document.getElementById("donations"),backers=document.getElementById("backers"),progress=document.getElementById("progress"),donationsValue=89914,backersValue=5007;function closeModal(e){e?e.classList.remove("is--visible"):(popupModal.classList.remove("is--visible"),successModal.classList.remove("is--visible")),bodyBlackout.classList.remove("is-blacked-out")}function openModal(e){e.classList.add("is--visible"),bodyBlackout.classList.add("is-blacked-out")}function validatePledge(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=e.querySelector("input[type='text']"),n=e.querySelector(".errorMessage");return""===t.value?(e.classList.add("error"),void(n.innerText="enter amount")):t.value.match(/\D/)?(e.classList.add("error"),void(n.innerText="enter numeric characters only [0-9]")):Number(t.value)<o?(e.classList.add("error"),void(n.innerText="amount must be at least $".concat(o))):(e.classList.remove("error"),n.innerText="",Number(t.value))}donations.innerText=numberWithCommas(donationsValue),backers.innerText=numberWithCommas(backersValue),progress.value=donationsValue,modalCloseTrigger.addEventListener("click",(function(){closeModal(popupModal)})),successModalCloseTrigger.addEventListener("click",(function(){closeModal(successModal)})),bodyBlackout.addEventListener("click",(function(){closeModal()})),modalTriggers.forEach((function(e){e.addEventListener("click",(function(){var o=e.dataset.product;openModal(popupModal,o)}))})),radios.forEach((function(e){return e.addEventListener("change",(function(){cardWrap.forEach((function(o){o.dataset.product==e.dataset.product?(o.classList.add("checked"),o.querySelector("input[type='text']").focus()):o.classList.remove("checked")}))}))}));var minPledge={"no-reward":0,"bamboo-stand":25,"black-stand":75,"mahogany-stand":200};function numberWithCommas(e){var o=e.toString().split(".");return o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),o.join(".")}forms.forEach((function(e){var o=e.dataset.product;e.addEventListener("submit",(function(e){e.preventDefault();var t=validatePledge(e.target,minPledge["".concat(o)]);t&&(donationsValue+=t,backersValue+=1,donations.innerText=numberWithCommas(donationsValue),backers.innerText=numberWithCommas(backersValue),progress.value=donationsValue,document.querySelectorAll(".amount").forEach((function(e){if(e.dataset.product===o){var t=Number(e.innerText)-1;0===t&&(document.querySelectorAll(".card[data-product=".concat(o,"]")).forEach((function(e){e.classList.add("out-of-stock");var o=e.querySelector("button");o.disabled=!0,o.innerText="Out of Stock"})),document.querySelectorAll(".cardWrap[data-product=".concat(o,"]")).forEach((function(e){return e.classList.add("out-of-stock")}))),e.innerText=t}})),closeModal(popupModal),openModal(successModal),console.log("pledge",t))})),e.querySelector("input[type='text']").addEventListener("input",(function(){validatePledge(e,minPledge["".concat(o)])}))}));
//# sourceMappingURL=script.js.map