{"version":3,"sources":["script.js"],"names":["openMenuBtn","document","getElementById","closeMenuBtn","menuControls","nav","bookmarkBtn","popupModal","querySelector","successModal","modalTriggers","querySelectorAll","modalCloseTrigger","successModalCloseTrigger","bodyBlackout","cardWrap","radios","forms","inputs","donations","backers","progress","bookmarked","donationsValue","backersValue","products","no-reward","amount","minPledge","bamboo-stand","black-stand","mahogany-stand","openMenu","classList","add","closeMenu","remove","addBookmark","console","log","lastElementChild","innerText","updateAmounts","product","numberWithCommas","value","forEach","element","dataset","concat","card","button","disabled","closeModal","modal","openModal","validatePledge","form","min","arguments","length","undefined","input","err","match","Number","x","parts","toString","split","replace","join","addEventListener","trigger","radio","focus","e","preventDefault","pledge","target"],"mappings":"AAAA,aAIA,IAAMA,YAAcC,SAASC,eAAe,UACtCC,aAAeF,SAASC,eAAe,aACvCE,aAAeH,SAASC,eAAe,gBACvCG,IAAMJ,SAASC,eAAe,OAG9BI,YAAcL,SAASC,eAAe,eAGtCK,WAAaN,SAASO,cAAc,gBACpCC,aAAeR,SAASO,cAAc,kBACtCE,cAAgBT,SAASU,iBAAiB,kBAC1CC,kBAAoBX,SAASO,cAAc,uBAC3CK,yBAA2BZ,SAASO,cACxC,yBAEIM,aAAeb,SAASO,cAAc,kBACtCO,SAAWd,SAASU,iBAAiB,aACrCK,OAASf,SAASU,iBAAiB,uBACnCM,MAAQhB,SAASU,iBAAiB,qBAClCO,OAASjB,SAASU,iBACtB,wCAEIQ,UAAYlB,SAASC,eAAe,aACpCkB,QAAUnB,SAASC,eAAe,WAClCmB,SAAWpB,SAASC,eAAe,YAKrCoB,YAAa,EACbC,eAAiB,MACjBC,aAAe,KAEfC,SAAW,CACbC,YAAa,CAAEC,OAAQ,KAAMC,UAAW,GACxCC,eAAgB,CAAEF,OAAQ,IAAKC,UAAW,IAC1CE,cAAe,CAAEH,OAAQ,GAAIC,UAAW,IACxCG,iBAAkB,CAAEJ,OAAQ,EAAGC,UAAW,MAS5C,SAASI,WACP3B,IAAI4B,UAAUC,IAAI,QAClB9B,aAAa6B,UAAUC,IAAI,QAE7B,SAASC,YACP9B,IAAI4B,UAAUG,OAAO,QACrBhC,aAAa6B,UAAUG,OAAO,QAQhC,SAASC,cACFf,aACHgB,QAAQC,IAAI,mBACZjC,YAAYkC,iBAAiBC,UAAY,aACzCnC,YAAY2B,UAAUC,IAAI,cAC1BZ,YAAa,GA+EjB,SAASoB,cAAcC,GACrBxB,UAAUsB,UAAYG,iBAAiBrB,gBACvCH,QAAQqB,UAAYG,iBAAiBpB,cACrCH,SAASwB,MAAQtB,eAGjB,IAAII,EAAS1B,SAASU,iBAAT,WACTgC,EAEFhB,EAAOmB,SAAQ,SAACC,GACVA,EAAQC,QAAQL,UAAYA,IACQ,IAAlClB,SAAQ,GAAAwB,OAAIN,IAAWhB,SACzB1B,SACGU,iBADH,sBAAAsC,OAC0CN,EAD1C,MAEGG,SAAQ,SAACI,GACRA,EAAKjB,UAAUC,IAAI,gBACnB,IAAIiB,EAASD,EAAK1C,cAAc,UAChC2C,EAAOC,UAAW,EAClBD,EAAOV,UAAY,kBAEvBxC,SACGU,iBADH,0BAAAsC,OAC8CN,EAD9C,MAEGG,SAAQ,SAACI,GAAD,OAAUA,EAAKjB,UAAUC,IAAI,oBAG1Ca,EAAQN,UAAYhB,SAAQ,GAAAwB,OAAIN,IAAWhB,WAK/CA,EAAOmB,SAAQ,SAACC,GACwC,IAAlDtB,SAAQ,GAAAwB,OAAIF,EAAQC,QAAQL,UAAWhB,SACzC1B,SACGU,iBADH,sBAAAsC,OAC0CN,EAD1C,MAEGG,SAAQ,SAACI,GACRA,EAAKjB,UAAUC,IAAI,gBACnB,IAAIiB,EAASD,EAAK1C,cAAc,UAChC2C,EAAOC,UAAW,EAClBD,EAAOV,UAAY,kBAEvBxC,SACGU,iBADH,0BAAAsC,OAC8CN,EAD9C,MAEGG,SAAQ,SAACI,GAAD,OAAUA,EAAKjB,UAAUC,IAAI,oBAG1Ca,EAAQN,UAAYhB,SAAQ,GAAAwB,OAAIF,EAAQC,QAAQL,UAAWhB,UAMjE,SAAS0B,WAAWC,GAGdA,EAEFA,EAAMrB,UAAUG,OAAO,gBAGvB7B,WAAW0B,UAAUG,OAAO,eAC5B3B,aAAawB,UAAUG,OAAO,gBAEhCtB,aAAamB,UAAUG,OAAO,kBAIhC,SAASmB,UAAUD,GACjBA,EAAMrB,UAAUC,IAAI,eACpBpB,aAAamB,UAAUC,IAAI,kBAI7B,SAASsB,eAAeC,GAAe,IAATC,EAASC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,EAE9BG,EAAQL,EAAKjD,cAAc,sBAC3BuD,EAAMN,EAAKjD,cAAc,iBAE7B,MAAoB,KAAhBsD,EAAMjB,OACRY,EAAKxB,UAAUC,IAAI,cACnB6B,EAAItB,UAAY,iBAEPqB,EAAMjB,MAAMmB,MAAM,OAC3BP,EAAKxB,UAAUC,IAAI,cACnB6B,EAAItB,UAAY,wCAEPwB,OAAOH,EAAMjB,OAASa,GAC/BD,EAAKxB,UAAUC,IAAI,cACnB6B,EAAItB,UAAJ,4BAAAQ,OAA4CS,MAG5CD,EAAKxB,UAAUG,OAAO,SACtB2B,EAAItB,UAAY,GACTwB,OAAOH,EAAMjB,QAKxB,SAASD,iBAAiBsB,GACxB,IAAIC,EAAQD,EAAEE,WAAWC,MAAM,KAE/B,OADAF,EAAM,GAAKA,EAAM,GAAGG,QAAQ,wBAAyB,KAC9CH,EAAMI,KAAK,KAzMpBvE,YAAYwE,iBAAiB,QAASxC,UACtC7B,aAAaqE,iBAAiB,QAASrC,WAcvC7B,YAAYkE,iBAAiB,QAASnC,aAgBtCzB,kBAAkB4D,iBAAiB,SAAS,WAC1CnB,WAAW9C,eAIbM,yBAAyB2D,iBAAiB,SAAS,WACjDnB,WAAW5C,iBAIbK,aAAa0D,iBAAiB,SAAS,WACrCnB,gBAIF3C,cAAcoC,SAAQ,SAAC2B,GACrBA,EAAQD,iBAAiB,SAAS,WAChC,IAAQ7B,EAAY8B,EAAQzB,QAApBL,QACRY,UAAUhD,WAAYoC,SAK1B3B,OAAO8B,SAAQ,SAAC4B,GAAD,OACbA,EAAMF,iBAAiB,UAAU,WAC/BzD,SAAS+B,SAAQ,SAACI,GACZA,EAAKF,QAAQL,SAAW+B,EAAM1B,QAAQL,SACxCO,EAAKjB,UAAUC,IAAI,WAGnBgB,EAAK1C,cAAc,sBAAsBmE,SAEzCzB,EAAKjB,UAAUG,OAAO,oBAO9BnB,MAAM6B,SAAQ,SAACW,GACb,IAAId,EAAUc,EAAKT,QAAQL,QAC3Bc,EAAKe,iBAAiB,UAAU,SAACI,GAC/BA,EAAEC,iBACF,IAGIC,EAAStB,eAHFoB,EAAEG,OAGqBtD,SAAQ,GAAAwB,OAAIN,IAAWf,WAErDkD,IAEFvD,gBAAkBuD,EAClBtD,cAAgB,EAChBC,SAAQ,GAAAwB,OAAIN,IAAWhB,QAAU,EAEjCe,cAAcC,GAGdU,WAAW9C,YACXgD,UAAU9C,kBAKFgD,EAAKjD,cAAc,sBACzBgE,iBAAiB,SAAS,WAC9BhB,eAAeC,EAAMhC,SAAQ,GAAAwB,OAAIN,IAAWf,iBA6GhDc,gBAGAJ,QAAQC,IAAI","file":"script.js","sourcesContent":["/***************************\r\nDom references\r\n***************************/\r\n// For nav\r\nconst openMenuBtn = document.getElementById(\"burger\");\r\nconst closeMenuBtn = document.getElementById(\"closeMenu\");\r\nconst menuControls = document.getElementById(\"menuControls\");\r\nconst nav = document.getElementById(\"nav\");\r\n\r\n// For bookmark\r\nconst bookmarkBtn = document.getElementById(\"bookmarkBtn\");\r\n\r\n// For modals\r\nconst popupModal = document.querySelector(\".popup-modal\");\r\nconst successModal = document.querySelector(\".success-modal\");\r\nconst modalTriggers = document.querySelectorAll(\".popup-trigger\");\r\nconst modalCloseTrigger = document.querySelector(\".popup-modal__close\");\r\nconst successModalCloseTrigger = document.querySelector(\r\n  \".success-modal__close\"\r\n);\r\nconst bodyBlackout = document.querySelector(\".body-blackout\");\r\nconst cardWrap = document.querySelectorAll(\".cardWrap\");\r\nconst radios = document.querySelectorAll(\"input[type='radio']\");\r\nconst forms = document.querySelectorAll(\".productForm form\");\r\nconst inputs = document.querySelectorAll(\r\n  \".productForm form input[type='text']\"\r\n);\r\nconst donations = document.getElementById(\"donations\");\r\nconst backers = document.getElementById(\"backers\");\r\nconst progress = document.getElementById(\"progress\");\r\n\r\n/***************************\r\nVariables\r\n***************************/\r\nlet bookmarked = false;\r\nlet donationsValue = 89914;\r\nlet backersValue = 5007;\r\n// Defining amount of products left and minimum pledges for products\r\nlet products = {\r\n  \"no-reward\": { amount: null, minPledge: 0 },\r\n  \"bamboo-stand\": { amount: 101, minPledge: 25 },\r\n  \"black-stand\": { amount: 64, minPledge: 75 },\r\n  \"mahogany-stand\": { amount: 0, minPledge: 200 },\r\n};\r\n\r\n/***************************\r\nNavbar Logic\r\n***************************/\r\nopenMenuBtn.addEventListener(\"click\", openMenu);\r\ncloseMenuBtn.addEventListener(\"click\", closeMenu);\r\n\r\nfunction openMenu() {\r\n  nav.classList.add(\"open\");\r\n  menuControls.classList.add(\"open\");\r\n}\r\nfunction closeMenu() {\r\n  nav.classList.remove(\"open\");\r\n  menuControls.classList.remove(\"open\");\r\n}\r\n\r\n/***************************\r\nBookmark Logic\r\n***************************/\r\nbookmarkBtn.addEventListener(\"click\", addBookmark);\r\n\r\nfunction addBookmark() {\r\n  if (!bookmarked) {\r\n    console.log(\"adding bookmark\");\r\n    bookmarkBtn.lastElementChild.innerText = \"Bookmarked\";\r\n    bookmarkBtn.classList.add(\"bookmarked\");\r\n    bookmarked = true;\r\n  }\r\n}\r\n\r\n/***************************\r\nModal Logic\r\n***************************/\r\n\r\n// close modals\r\nmodalCloseTrigger.addEventListener(\"click\", () => {\r\n  closeModal(popupModal);\r\n});\r\n\r\n// Close success modal\r\nsuccessModalCloseTrigger.addEventListener(\"click\", () => {\r\n  closeModal(successModal);\r\n});\r\n\r\n// Close modal when you click outside of it\r\nbodyBlackout.addEventListener(\"click\", () => {\r\n  closeModal();\r\n});\r\n\r\n// Open modal when triggers are clicked\r\nmodalTriggers.forEach((trigger) => {\r\n  trigger.addEventListener(\"click\", () => {\r\n    const { product } = trigger.dataset;\r\n    openModal(popupModal, product);\r\n  });\r\n});\r\n\r\n// Update selected product to match selected radio button\r\nradios.forEach((radio) =>\r\n  radio.addEventListener(\"change\", () => {\r\n    cardWrap.forEach((card) => {\r\n      if (card.dataset.product == radio.dataset.product) {\r\n        card.classList.add(\"checked\");\r\n\r\n        // autofocus input\r\n        card.querySelector(\"input[type='text']\").focus();\r\n      } else {\r\n        card.classList.remove(\"checked\");\r\n      }\r\n    });\r\n  })\r\n);\r\n\r\n// Handle pledge submission, validation and updating amounts\r\nforms.forEach((form) => {\r\n  let product = form.dataset.product;\r\n  form.addEventListener(\"submit\", (e) => {\r\n    e.preventDefault();\r\n    let form = e.target;\r\n\r\n    // Validate form input\r\n    let pledge = validatePledge(form, products[`${product}`].minPledge);\r\n\r\n    if (pledge) {\r\n      // update donations\r\n      donationsValue += pledge;\r\n      backersValue += 1;\r\n      products[`${product}`].amount -= 1;\r\n\r\n      updateAmounts(product);\r\n\r\n      // Show success modal\r\n      closeModal(popupModal);\r\n      openModal(successModal);\r\n    }\r\n  });\r\n\r\n  // Auto validating pledge amounts\r\n  let input = form.querySelector(\"input[type='text']\");\r\n  input.addEventListener(\"input\", () => {\r\n    validatePledge(form, products[`${product}`].minPledge);\r\n  });\r\n});\r\n\r\n// Update amounts funtion\r\nfunction updateAmounts(product) {\r\n  donations.innerText = numberWithCommas(donationsValue);\r\n  backers.innerText = numberWithCommas(backersValue);\r\n  progress.value = donationsValue;\r\n\r\n  // update amounts\r\n  let amount = document.querySelectorAll(`.amount`);\r\n  if (product) {\r\n    // Update the product amount only\r\n    amount.forEach((element) => {\r\n      if (element.dataset.product === product) {\r\n        if (products[`${product}`].amount === 0) {\r\n          document\r\n            .querySelectorAll(`.card[data-product=${product}]`)\r\n            .forEach((card) => {\r\n              card.classList.add(\"out-of-stock\");\r\n              let button = card.querySelector(\"button\");\r\n              button.disabled = true;\r\n              button.innerText = \"Out of Stock\";\r\n            });\r\n          document\r\n            .querySelectorAll(`.cardWrap[data-product=${product}]`)\r\n            .forEach((card) => card.classList.add(\"out-of-stock\"));\r\n        }\r\n\r\n        element.innerText = products[`${product}`].amount;\r\n      }\r\n    });\r\n  } else {\r\n    // Update all product amount\r\n    amount.forEach((element) => {\r\n      if (products[`${element.dataset.product}`].amount === 0) {\r\n        document\r\n          .querySelectorAll(`.card[data-product=${product}]`)\r\n          .forEach((card) => {\r\n            card.classList.add(\"out-of-stock\");\r\n            let button = card.querySelector(\"button\");\r\n            button.disabled = true;\r\n            button.innerText = \"Out of Stock\";\r\n          });\r\n        document\r\n          .querySelectorAll(`.cardWrap[data-product=${product}]`)\r\n          .forEach((card) => card.classList.add(\"out-of-stock\"));\r\n      }\r\n\r\n      element.innerText = products[`${element.dataset.product}`].amount;\r\n    });\r\n  }\r\n}\r\n\r\n// Close modal funtion\r\nfunction closeModal(modal) {\r\n  // Remove all error messages and inputs\r\n\r\n  if (modal) {\r\n    // close specified modal\r\n    modal.classList.remove(\"is--visible\");\r\n  } else {\r\n    // close all modals\r\n    popupModal.classList.remove(\"is--visible\");\r\n    successModal.classList.remove(\"is--visible\");\r\n  }\r\n  bodyBlackout.classList.remove(\"is-blacked-out\");\r\n}\r\n\r\n// Open modal function\r\nfunction openModal(modal, product = null) {\r\n  modal.classList.add(\"is--visible\");\r\n  bodyBlackout.classList.add(\"is-blacked-out\");\r\n}\r\n\r\n// Function to validate pledge amount\r\nfunction validatePledge(form, min = 0) {\r\n  // Get children elements\r\n  let input = form.querySelector(\"input[type='text']\");\r\n  let err = form.querySelector(\".errorMessage\");\r\n\r\n  if (input.value === \"\") {\r\n    form.classList.add(\"error\");\r\n    err.innerText = \"enter amount\";\r\n    return;\r\n  } else if (input.value.match(/\\D/)) {\r\n    form.classList.add(\"error\");\r\n    err.innerText = \"enter numeric characters only [0-9]\";\r\n    return;\r\n  } else if (Number(input.value) < min) {\r\n    form.classList.add(\"error\");\r\n    err.innerText = `amount must be at least $${min}`;\r\n    return;\r\n  } else {\r\n    form.classList.remove(\"error\");\r\n    err.innerText = \"\";\r\n    return Number(input.value);\r\n  }\r\n}\r\n\r\n// turn numbers to comma seperated strings\r\nfunction numberWithCommas(x) {\r\n  var parts = x.toString().split(\".\");\r\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  return parts.join(\".\");\r\n}\r\n\r\n// Update amounts on start\r\nupdateAmounts();\r\n\r\n// Confirm script is connected\r\nconsole.log(\"script loaded\");\r\n// console.log(products[`no-reward`].minPledge);\r\n\r\n// select on header click\r\n\r\n// Open modal already selected\r\n\r\n// Remove all error messages and inputs on modal close\r\n\r\n// product amount tracking\r\n"]}